<!doctype html><html><head><meta charset=utf-8><title>kiennt26's home | Docker and Iptables: You may do it wrong!</title><meta name=author content="map[email:kiennt2609@gmail.com name:Kien Nguyen-Tuan]"><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon_io/favicon.ico type=image/x-icon><link rel=icon href=/favicon_io/favicon-16x16.png size=16x16 type=image/png><link rel=icon href=/favicon_io/favicon-32x32.png size=32x32 type=image/png><link rel=preload type=text/css href=/css/rose-pine.min.css integrity as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet type=text/css href=/css/rose-pine.min.css integrity></noscript><link rel=preload type=text/css href="/css/toigian.min.1862cf4f3e8ae8d4cbaa9e763c34675fa2594301696de977455f0027acda3ff7.css" integrity="sha256-GGLPTz6K6NTLqp52PDRnX6JZQwFpbel3RV8AJ6zaP/c=" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet type=text/css href="/css/toigian.min.1862cf4f3e8ae8d4cbaa9e763c34675fa2594301696de977455f0027acda3ff7.css" integrity="sha256-GGLPTz6K6NTLqp52PDRnX6JZQwFpbel3RV8AJ6zaP/c="></noscript><link rel=stylesheet type=text/css href="/css/light.min.29febe5c26ca625f7e2913e2509889a65637f415171eb003603102dea7cc42e0.css" integrity="sha256-Kf6+XCbKYl9+KRPiUJiJplY39BUXHrADYDEC3qfMQuA="><link rel=stylesheet type=text/css href="/css/dark.min.47fea451289f4f246c4875ba0aa5f6376183f220c766f5e90d15d6e48cb7b937.css" integrity="sha256-R/6kUSifTyRsSHW6CqX2N2GD8iDHZvXpDRXW5Iy3uTc="><script>localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")</script><script defer src=/js/main.dfa968b06ebe7fb755eb156f7296445f20bd5ca0c82aa2eb755b1bfac4e2f294676471cf7670590073c364901a0dd5dc4b4c7b83f7a4a3c3b081f085c78fa1de.js integrity="sha512-36losG6+f7dV6xVvcpZEXyC9XKDIKqLrdVsb+sTi8pRnZHHPdnBZAHPDZJAaDdXcS0x7g/eko8OwgfCFx4+h3g=="></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0,securityLevel:"loose"})</script></head><body><header style=--layer:10><div aria-hidden=true class="absolute top-[-1000px] left-0 z-[calc(var(--layer)+1)] h-[calc(1000px+var(--page-top))] w-full bg-base"></div><div class="fixed top-0 left-0 z-[var(--layer)] flex h-header-height w-full items-center border-b px-page-gutter before:absolute before:inset-0 before:z-[-1] before:bg-base [@supports(backdrop-filter:blur(0))]:before:bg-base [@supports(backdrop-filter:blur(0))]:before:backdrop-blur-md"><div class="lowercase italic mx-auto flex w-full max-w-content items-center justify-between"><nav><ol class="flex text-md items-center"><li><a href=/ class="text-muted focus:underline focus:outline-none after:mx-[1ch]">kiennt26's home</a></li><li class="text-muted focus:underline focus:outline-none after:mx-[1ch]">/</li><li><a href=/posts/ class="text-muted focus:underline focus:outline-none after:mx-[1ch]">Posts</a></li><li class="text-muted focus:underline focus:outline-none after:mx-[1ch]">/</li><li><a href=/posts/docker-iptables/ class="focus:underline focus:outline-none font-bold after:mx-[1ch]">Docker and Iptables: You may do it wrong!</a></li></ol></nav></div></div></header><main class="flex justify-center px-page-gutter py-page-top"><div class="min-h-content w-full max-w-content space-y-10 sm:space-y-20"><div class="lowercase italic mx-auto flex w-full max-w-content items-center justify-between"><nav><ol class="flex text-md items-center"><li><a href=/ class="text-muted focus:underline focus:outline-none after:mx-[1ch]">kiennt26's home</a></li><li class="text-muted focus:underline focus:outline-none after:mx-[1ch]">/</li><li><a href=/posts/ class="text-muted focus:underline focus:outline-none after:mx-[1ch]">Posts</a></li><li class="text-muted focus:underline focus:outline-none after:mx-[1ch]">/</li><li><a href=/posts/docker-iptables/ class="focus:underline focus:outline-none font-bold after:mx-[1ch]">Docker and Iptables: You may do it wrong!</a></li></ol></nav></div><article><h1>Docker and Iptables: You may do it wrong!</h1><time class="text-sm italic tabular-nums text-muted">Oct 25, 2022&nbsp;</time><div class=section><a href=/tags/tech/ id=tag>tech</a>
<a href=/tags/docker/ id=tag>docker</a>
<a href=/tags/iptables/ id=tag>iptables</a></div><details><summary>Table of contents</summary><div id=toc-list><nav id=TableOfContents><ol><li><a href=#1-mission>1. Mission</a></li><li><a href=#2-docker-network>2. Docker network</a></li><li><a href=#3-you-may-do-it-wrong---common-mistakes>3. You may do it wrong - common mistakes</a><ol><li><a href=#31-modify-docker-generated-rules-manually>3.1. Modify Docker generated rules manually</a></li><li><a href=#32-insert-you-rules-in-the-wrong-chain>3.2. Insert you rules in the wrong chain</a></li><li><a href=#33-modify-and-persistent-iptables-wrong>3.3. Modify and persistent iptables wrong</a></li></ol></li><li><a href=#4-do-it-right>4. Do it right!</a><ol><li><a href=#41-overview>4.1. Overview</a></li><li><a href=#42-getting-started>4.2. Getting started</a></li></ol></li><li><a href=#5-references>5. References</a></li></ol></nav></div></details><div class=content><h2 id=1-mission>1. Mission</h2><p>If you&rsquo;re running Docker on a host that is exposed to the Internet (network bridge), you will probably want to restrict external access.</p><h2 id=2-docker-network>2. Docker network</h2><p>Let&rsquo;s start with a fact that Docker manipulates <code>iptables</code> rules to provide network isolation, on Linux. Docker installs custom iptables chains named <code>DOCKER</code>, <code>DOCKER-USER</code> and <code>DOCKER-ISOLATION-STAGE-*</code>, and it ensures that incoming packets are always checked by these chains first.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -L -n
</span></span></code></pre></div><p>Re.Docker network, I won&rsquo;t describe here because it&rsquo;s a lot of knowledge. You may want to check <a href=https://github.com/ntk148v/til/blob/master/docker/networking/README.md>Docker network note</a>. I will only show iptables packet flow: For example, we have a host with ip 10.0.10.26, then start a container that is exposed port 8000 to internet.</p><figure class=figure><img src=/photos/docker-iptables/docker-iptables-1.png></figure><p>This is a basic packet flow from outside:</p><figure class=figure><img src=/photos/docker-iptables/docker-iptables-2.png></figure><h2 id=3-you-may-do-it-wrong---common-mistakes>3. You may do it wrong - common mistakes</h2><p>Alright, before we make it right, there are some common mistakes.</p><h3 id=31-modify-docker-generated-rules-manually>3.1. Modify Docker generated rules manually</h3><p>Docker generates iptables rules, then adds to <code>DOCKER</code> chains. Some users may manipulate this chain manually in order to block connections.</p><p><em>Please don&rsquo;t do it</em>. Yes, you are able to do it, there is nothing prevent you to perform this kind of action. But every time Docker daemon is reloaded, iptables rules are re-generated and your changes is gone.</p><blockquote class="my-5 p-4 rounded border-solid border-2 border-foam">Right: Do not manipulate Docker rules manually.</blockquote><h3 id=32-insert-you-rules-in-the-wrong-chain>3.2. Insert you rules in the wrong chain</h3><p>iptables basic: iptables is divied into three levels: tables, chains and rules. We only use the filter tables, which contains:</p><ul><li>INPUT: Packets sent to this host pass through this chain.</li><li>OUTPUT: Packets sent from this host pass through this chain.</li><li>FORWARD: Packets forwarded by this host pass through this chain.</li></ul><p>Commonly, to block connection from external, put reject rules in INPUT chain. But in Docker, it doesn&rsquo;t work. Look at the above packet flow, the packet doesn&rsquo;t pass through INPUT chain, it goes in FORWARD chain. Since Docker connects the bridge (default docker0) to the default gateway (external interface ens33 for example) via Network Address Translation (NAT) by default, setting INPUT is useless and the FORWARD chain should be set. And since the FORWARD chain defaults to DROP, all forwarding is blocked by DOCKER-USER.</p><blockquote class="my-5 p-4 rounded border-solid border-2 border-foam">Right: Add rules which load before Docker&rsquo;s rules, add them to DOCKER-USER.</blockquote><h3 id=33-modify-and-persistent-iptables-wrong>3.3. Modify and persistent iptables wrong</h3><p>You modify and persistent iptables rules like this:</p><ul><li>Save all rules <code>iptables-save</code>.</li><li>Modify your rules.</li><li>Restore all rules with <code>iptables-restore</code>.</li><li>Persistent and load on start up using iptables-services or rc.local.</li></ul><p>This implementation has a drawback, every time Docker container changes, you need to save the current iptables configuration, otherwise when executing <code>iptables-restore</code>, it will load the old rules, which will lead to confusing iptables rules.</p><blockquote class="my-5 p-4 rounded border-solid border-2 border-foam">Right: Do not save, flush then restore all rules. Check the following solution.</blockquote><h2 id=4-do-it-right>4. Do it right!</h2><h3 id=41-overview>4.1. Overview</h3><p>I have create a repository for this, which is highly inspired by <a href=https://github.com/boTux-fr/systemd-service-iptables>systemd-service-iptables</a>: <a href=https://github.com/ntk148v/systemd-iptables>https://github.com/ntk148v/systemd-iptables</a></p><ul><li><p>Whitelist strategy: block all, allow some.</p></li><li><p><code>iptables-restore -n|--no-flush</code> turns off implicit global refresh and only performs our manual explicit refresh: only modified chains are flushed.</p></li><li><p>Control iptables with systemd: start iptables after other services.</p><ul><li>iptables.service.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Unit]
</span></span><span class=line><span class=cl>Documentation=man:iptables man:iptables-restore
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Service]
</span></span><span class=line><span class=cl>Type=oneshot
</span></span><span class=line><span class=cl>ExecStart=/bin/true
</span></span><span class=line><span class=cl>RemainAfterExit=on
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Install]
</span></span><span class=line><span class=cl>WantedBy=multi-user.target
</span></span></code></pre></div><ul><li>iptables@.service.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Unit]
</span></span><span class=line><span class=cl>DefaultDependencies=no
</span></span><span class=line><span class=cl>Wants=network-pre.target
</span></span><span class=line><span class=cl>Wants=systemd-modules-load.service
</span></span><span class=line><span class=cl>Wants=local-fs.target
</span></span><span class=line><span class=cl>Before=network-pre.target
</span></span><span class=line><span class=cl>Before=shutdown.target
</span></span><span class=line><span class=cl>After=systemd-modules-load.service
</span></span><span class=line><span class=cl>After=local-fs.target
</span></span><span class=line><span class=cl>After=dbus.service
</span></span><span class=line><span class=cl>After=polkit.service
</span></span><span class=line><span class=cl>PartOf=iptables.service
</span></span><span class=line><span class=cl>Conflicts=shutdown.target
</span></span><span class=line><span class=cl>ConditionPathExists=/etc/iptables/
</span></span><span class=line><span class=cl>Documentation=man:iptables man:iptables-restore
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Service]
</span></span><span class=line><span class=cl>Environment=IPTABLES_RULES=/etc/iptables/%i.rules
</span></span><span class=line><span class=cl>Environment=IPTABLES_RULES_FLUSH=/etc/iptables/%i.rules.empty
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Type=oneshot
</span></span><span class=line><span class=cl># Start iptables-restore with no-flush option with %i.rules
</span></span><span class=line><span class=cl># NoFlush option (-n) is used to not flush other tables than %I.
</span></span><span class=line><span class=cl>ExecStart=/sbin/iptables-restore -v -n $IPTABLES_RULES
</span></span><span class=line><span class=cl># Reload the rules
</span></span><span class=line><span class=cl>ExecReload=/sbin/iptables-restore -v -n $IPTABLES_RULES
</span></span><span class=line><span class=cl># Stop and clean with empty rules
</span></span><span class=line><span class=cl>ExecStop=/sbin/iptables-restore -v -n $IPTABLES_RULES_FLUSH
</span></span><span class=line><span class=cl>RemainAfterExit=yes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Install]
</span></span><span class=line><span class=cl>WantedBy=multi-user.target
</span></span><span class=line><span class=cl># Need /etc/iptables/base.rules to exist.
</span></span><span class=line><span class=cl>DefaultInstance=base
</span></span></code></pre></div></li><li><p>Templating so nobody can&rsquo;t go wrong:</p><ul><li>base.rules.empty.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>*filter
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Reset counters
</span></span><span class=line><span class=cl>:INPUT ACCEPT [0:0]
</span></span><span class=line><span class=cl>:FORWARD DROP [0:0]
</span></span><span class=line><span class=cl>:OUTPUT ACCEPT [0:0]
</span></span><span class=line><span class=cl>:DOCKER-USER - [0:0]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Flush
</span></span><span class=line><span class=cl>-F INPUT
</span></span><span class=line><span class=cl>-F OUTPUT
</span></span><span class=line><span class=cl>-F DOCKER-USER
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>COMMIT
</span></span></code></pre></div><ul><li>base.rules.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>*filter
</span></span><span class=line><span class=cl># Reset counters
</span></span><span class=line><span class=cl>:INPUT ACCEPT [0:0]
</span></span><span class=line><span class=cl>:FORWARD DROP [0:0]
</span></span><span class=line><span class=cl>:OUTPUT ACCEPT [0:0]
</span></span><span class=line><span class=cl>:DOCKER-USER - [0:0]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Flush
</span></span><span class=line><span class=cl>-F INPUT
</span></span><span class=line><span class=cl>-F OUTPUT
</span></span><span class=line><span class=cl>-F DOCKER-USER
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>#########
</span></span><span class=line><span class=cl># INPUT #
</span></span><span class=line><span class=cl>#########
</span></span><span class=line><span class=cl># Accept on localhost
</span></span><span class=line><span class=cl>-A INPUT -i lo -m comment --comment &#34;Default: Accept loopback&#34; -j ACCEPT
</span></span><span class=line><span class=cl># Accept on Docker bridge
</span></span><span class=line><span class=cl>-A INPUT -i br+ -m comment --comment &#34;Default: Accept bridge networks&#34; -j ACCEPT
</span></span><span class=line><span class=cl>-A INPUT -i docker0 -m comment --comment &#34;Default: Accept docker0&#34; -j ACCEPT
</span></span><span class=line><span class=cl># Allow established sessions to receive traffic
</span></span><span class=line><span class=cl>-A INPUT -m state --state RELATED,ESTABLISHED -m comment --comment &#34;Default: Accept RELATED, ESTABLISHED connections&#34; -j ACCEPT
</span></span><span class=line><span class=cl>-A INPUT -p icmp -m comment --comment &#34;Default: Accept ICMP&#34; -j ACCEPT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Insert your INPUT ACCEPT rules here
</span></span><span class=line><span class=cl># For example:
</span></span><span class=line><span class=cl># Open https port only for 1 ip:
</span></span><span class=line><span class=cl># -A INPUT -s 10.1.1.1/32 -p tcp -m tcp --dport 443 -j ACCEPT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># By default reject all packets and leave a logging
</span></span><span class=line><span class=cl>-A INPUT -m comment --comment &#34;Default: Log INPUT dropped packets&#34; -j LOG --log-prefix &#34;iptables INPUT DROP &#34; --log-level 7
</span></span><span class=line><span class=cl>-A INPUT -j REJECT --reject-with icmp-host-prohibited
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>##########
</span></span><span class=line><span class=cl># OUTPUT #
</span></span><span class=line><span class=cl>##########
</span></span><span class=line><span class=cl># Accept on localhost
</span></span><span class=line><span class=cl>-A OUTPUT -o lo -j ACCEPT
</span></span><span class=line><span class=cl># Accept Docker networks
</span></span><span class=line><span class=cl>-A OUTPUT -o br+ -m comment --comment &#34;Default: Accept bridge networks&#34; -j ACCEPT
</span></span><span class=line><span class=cl>-A OUTPUT -o docker0 -m comment --comment &#34;Default: Accept docker0&#34; -j ACCEPT
</span></span><span class=line><span class=cl># Allow established sessions to receive traffic
</span></span><span class=line><span class=cl>-A OUTPUT -m state --state RELATED,ESTABLISHED -m comment --comment &#34;Default: Accept RELATED, ESTABLISHED connections&#34; -j ACCEPT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Insert your OUTPUT ACCEPT rules here
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># By default reject all packets and leave a logging
</span></span><span class=line><span class=cl>-A OUTPUT -m comment --comment &#34;Default: Log OUTPUT dropped packets&#34; -j LOG --log-prefix &#34;iptables OUTPUT DROP &#34; --log-level 7
</span></span><span class=line><span class=cl>-A OUTPUT -j REJECT --reject-with icmp-host-prohibited
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>###############
</span></span><span class=line><span class=cl># DOCKER-USER #
</span></span><span class=line><span class=cl>###############
</span></span><span class=line><span class=cl># Change your external interface here!
</span></span><span class=line><span class=cl># Allow established sessions to receive traffic
</span></span><span class=line><span class=cl>-A DOCKER-USER -i extinf -m state --state established,related -m comment --comment &#34;Default: Accept RELATED, ESTABLISHED connections&#34; -j ACCEPT
</span></span><span class=line><span class=cl>-A DOCKER-USER -i extinf -m conntrack --ctstate RELATED,ESTABLISHED -m comment --comment &#34;Default: Accept RELATED, ESTABLISHED connections&#34; -j ACCEPT
</span></span><span class=line><span class=cl>-A DOCKER-USER -o extinf -m state --state established,related -m comment --comment &#34;Default: Accept RELATED, ESTABLISHED connections&#34; -j ACCEPT
</span></span><span class=line><span class=cl>-A DOCKER-USER -o extinf -m conntrack --ctstate RELATED,ESTABLISHED -m comment --comment &#34;Default: Accept RELATED, ESTABLISHED connections&#34; -j ACCEPT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Insert your DOCKER-USER ACCEPT rules here
</span></span><span class=line><span class=cl># Note that you have to use conntrack and ctorigdstport due to NAT.
</span></span><span class=line><span class=cl># For example:
</span></span><span class=line><span class=cl># Allow all on http
</span></span><span class=line><span class=cl># -A DOCKER-USER -i ens192 -p tcp -m tcp -m conntrack --ctorigdstport 80 -j ACCEPT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># By default reject all packets
</span></span><span class=line><span class=cl>-A DOCKER-USER -i extinf -m comment --comment &#34;Default: Log DROP-USER input dropped packets in external inteface&#34; -j LOG --log-prefix &#34;iptables DOCKER-USER INPUT DROP in external interface&#34; --log-level 7
</span></span><span class=line><span class=cl>-A DOCKER-USER -i extinf -j REJECT
</span></span><span class=line><span class=cl>-A DOCKER-USER -o extinf -m comment --comment &#34;Default: Log DROP-USER output dropped packets in external inteface&#34; -j LOG --log-prefix &#34;iptables DOCKER-USER OUTPUT DROP in external interface&#34; --log-level 7
</span></span><span class=line><span class=cl>-A DOCKER-USER -o extinf -j REJECT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-A DOCKER-USER -j RETURN
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>## Commit
</span></span><span class=line><span class=cl>COMMIT
</span></span></code></pre></div></li></ul><h3 id=42-getting-started>4.2. Getting started</h3><ul><li>Ofc you need iptables and systemd installed.</li><li>On the Linux, run as root:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>git clone https://github.com/ntk148v/systemd-iptables
</span></span><span class=line><span class=cl><span class=nb>cd</span> systemd-iptables
</span></span><span class=line><span class=cl><span class=c1># Edit the rules in etc/iptables/base.rules as needed.</span>
</span></span><span class=line><span class=cl><span class=c1># and install the service</span>
</span></span><span class=line><span class=cl>cp -Rv etc/. /etc/
</span></span></code></pre></div><ul><li>Make changes in <code>/etc/iptables/base.rules</code>.<ul><li>Replace the placeholder <code>extinf</code> interface in the rulebook with your actual external interface (<code>eth0</code> for e.x).</li><li>Add your custom allow rules in the right place!<ul><li>Allow inbound connections -> INPUT Custom Accept Block.</li><li>Allow outbound connections -> OUTPUT Custom Accept Block.</li><li>Allow inbound/outbound connections to your Docker containers using network bridge -> DOCKER-USER Custom Accept Block.</li></ul></li></ul></li><li>After that, enable the serivces and we are done:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>systemctl daemon-reload
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> iptables.service
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> iptables@base.service
</span></span><span class=line><span class=cl>systemctl start iptables@base.service
</span></span><span class=line><span class=cl><span class=c1># Check status</span>
</span></span><span class=line><span class=cl>systemctl status iptables@base.service
</span></span></code></pre></div><ul><li>If you make any changes in the future, make sure to restart/reload your service.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>systemctl restart iptables@base.service
</span></span></code></pre></div><h2 id=5-references>5. References</h2><ol><li><a href=https://docs.docker.com/network/iptables/>https://docs.docker.com/network/iptables/</a></li><li><a href=https://github.com/boTux-fr/systemd-service-iptables>https://github.com/boTux-fr/systemd-service-iptables</a></li></ol></div><div class=mt-16></div></article></div></main><footer class="fixed left-0 bottom-0 w-full bg-base h-footer-height px-page-gutter"><div class="flex justify-center items-center h-footer-height"><div class="flex flex-row w-full max-w-content justify-between lowercase italic gap-3"><nav><ul class="flex text-md space-x-3 sm:space-x-6"><li class=text-text><a href=/contact class="tracking-wide hover:underline">Contact</a></li><li class=text-text><a href=/posts class="tracking-wide hover:underline">Posts</a></li></ul></nav><div id=header-theme-button><svg id="dark_mode_btn" class="hidden toolbox-btn" width="18" height="18" viewBox="0 0 24 24"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></svg><svg id="light_mode_btn" class="hidden toolbox-btn" width="18" height="18" viewBox="0 0 24 24"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></svg></div></div></div></footer></body></html>