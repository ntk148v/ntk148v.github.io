<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Server-sent Events (SSE) | kiennt26's home</title><link rel=apple-touch-icon sizes=57x57 href=/favicon_io/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon_io/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon_io/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon_io/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon_io/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon_io/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon_io/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon_io/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon_io/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon_io/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon_io/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon_io/favicon-16x16.png><link rel=manifest href=/favicon_io/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/favicon_io/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=/css/main.min.7c2e3acb1f4933aa19f3729495445482ab9d9dc0c28c00c85831559d823fd2e7.css integrity="sha256-fC46yx9JM6oZ83KUlURUgqudncDCjADIWDFVnYI/0uc=" crossorigin=anonymous><link rel=stylesheet href=/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" crossorigin=anonymous><script src=/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js integrity="sha256-I80MfYNyY7nq65buLZzPopadqj+gD6HB/ocBqbhyUaE=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script></head><body><header><header><nav class=path-nav><ol><li>/
<a href=/>kiennt26's home</a>
/</li><li><a href=/posts/>Posts</a>
/</li><li class=current><a href=/posts/sse-fastapi/>Server-sent Events (SSE)</a></li></ol></nav></header></header><main><h1>Server-sent Events (SSE)</h1><div class=terms-list><ul><li><a href=/tags/tech/>#Tech</a></li><li><a href=/tags/sse/>#Sse</a></li></ul></div><nav class=toc><strong>Table of contents</strong><div class=toc-content><nav id=TableOfContents><ol><li><a href=#whats-sse-anyway->What&rsquo;s SSE Anyway? ü§î</a><ol><li><a href=#the-technical-bits->The Technical Bits üîß</a></li></ol></li><li><a href=#show-me-the-code->Show Me The Code! üíª</a><ol><li><a href=#the-backend-the-chatty-friend>The Backend (The Chatty Friend)</a></li><li><a href=#the-frontend-the-patient-listener>The Frontend (The Patient Listener)</a></li></ol></li><li><a href=#why-sse->Why SSE? üåü</a></li><li><a href=#try-it-yourself->Try It Yourself! üöÄ</a></li><li><a href=#when-to-use-sse->When to Use SSE? ü§ì</a></li><li><a href=#real-world-use-cases--best-practices->Real-World Use Cases & Best Practices üéØ</a><ol><li><a href=#perfect-fits-for-sse->Perfect Fits for SSE üéØ</a></li><li><a href=#best-practices->Best Practices üèÜ</a></li></ol></li><li><a href=#the-end->The End üé¨</a></li><li><a href=#contributing->Contributing ü§ù</a></li></ol></nav></div></nav><h1 id=the-introverts-guide-to-real-time-web-updates->The Introvert&rsquo;s Guide to Real-time Web Updates üôà</h1><p>Ever felt like WebSocket is that extroverted friend who&rsquo;s always trying to start a conversation? &ldquo;Hey server, how are you?&rdquo; &ldquo;I&rsquo;m fine client, how are you?&rdquo; &ldquo;I&rsquo;m good too!&rdquo; üôÑ</p><p>Well, meet Server-sent Events (SSE) - the introvert&rsquo;s dream come true in the world of real-time web communications. It&rsquo;s like having a friend who&rsquo;s totally cool with you just listening while they do all the talking. Perfect, right?</p><h2 id=whats-sse-anyway->What&rsquo;s SSE Anyway? ü§î</h2><p>Imagine you&rsquo;re at a soccer match, but instead of watching it live, you&rsquo;re getting updates from your chatty friend who&rsquo;s there:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Friend: &#34;Kick-off!&#34;
</span></span><span style=display:flex><span>You: *nods silently*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Friend: &#34;GOOOAL! Manchester United 1 - 0 Liverpool!&#34;
</span></span><span style=display:flex><span>You: *continues nodding*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Friend: &#34;Half-time! Still 1-0&#34;
</span></span><span style=display:flex><span>You: *thumbs up*
</span></span></code></pre></div><p>That&rsquo;s basically SSE! The server (your friend) sends updates whenever something happens, and the client (you) just&mldr; listens. No need to ask &ldquo;what&rsquo;s happening?&rdquo; every 5 seconds like with traditional polling, or maintain a complex two-way conversation like with WebSockets.</p><h3 id=the-technical-bits->The Technical Bits üîß</h3><p>Server-Sent Events (SSE) is a web standard that enables servers to push data to web clients via HTTP. Here&rsquo;s what makes it special:</p><ol><li><p><strong>The Connection</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#666;font-weight:700;font-style:italic>GET</span> <span style=color:#666;font-weight:700;font-style:italic>/livescore</span> <span style=font-weight:700>HTTP</span>/1.1
</span></span><span style=display:flex><span>Accept: text/event-stream
</span></span></code></pre></div><p>The client makes a single HTTP request with <code>Accept: text/event-stream</code>, and the connection stays open. It&rsquo;s like subscribing to your friend&rsquo;s match updates on WhatsApp.</p></li><li><p><strong>The Message Format</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>event: goal  # Optional event type
</span></span><span style=display:flex><span>data: {&#34;score&#34;: {&#34;home&#34;: 1, &#34;away&#34;: 0}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>data: {&#34;status&#34;: &#34;Game in progress&#34;}
</span></span></code></pre></div><p>Messages are sent as UTF-8 text, with each message separated by double newlines. Like your friend sending multiple texts, but way more organized!</p></li><li><p><strong>Event Types</strong></p><ul><li><code>message</code> - Default event</li><li>Custom events (like &lsquo;goal&rsquo;, &lsquo;halftime&rsquo;, &lsquo;fulltime&rsquo;)</li><li>Each type can have its own event handler on the client</li></ul></li><li><p><strong>Built-in Goodies</strong></p><ul><li>Automatic reconnection (configurable with <code>retry: 3000</code>)</li><li>Event IDs for tracking last received message</li><li>Cross-origin support with standard CORS</li></ul></li><li><p><strong>The Not-So-Fun Parts</strong> üòÖ</p><ul><li><strong>Browser Connection Limits</strong>: Most browsers limit the number of open SSE connections per domain (typically 6). It&rsquo;s like your friend can only update 6 people at once!</li><li><strong>One-Way Street</strong>: No built-in way to send data back to the server. Need to chat back? You&rsquo;ll need a separate HTTP request.</li><li><strong>Plain Text Only</strong>: Unlike WebSocket, SSE only supports UTF-8 text data. Binary data? Sorry, you&rsquo;ll need to encode it first.</li><li><strong>Proxy Issues</strong>: Some proxy servers don&rsquo;t play nice with long-lived connections. They might think your friend fell asleep and cut the connection!</li><li><strong>Header Size Limits</strong>: Some servers have a maximum header size limit, which can affect reconnection with large <code>Last-Event-ID</code> headers.</li></ul></li></ol><h2 id=show-me-the-code->Show Me The Code! üíª</h2><p>We&rsquo;ve built a simple soccer livescore system using FastAPI and SSE: <a href=https://github.com/ntk148v/sse-fastapi>https://github.com/ntk148v/sse-fastapi</a></p><p>Let&rsquo;s break down how it works:</p><h3 id=the-backend-the-chatty-friend>The Backend (The Chatty Friend)</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#888;font-style:italic># 1. First, we set up our FastAPI app with CORS support</span>
</span></span><span style=display:flex><span>app = FastAPI(title=<span style=color:#666;font-style:italic>&#34;Soccer Livescore SSE API&#34;</span>)
</span></span><span style=display:flex><span>app.add_middleware(
</span></span><span style=display:flex><span>    CORSMiddleware,
</span></span><span style=display:flex><span>    allow_origins=[<span style=color:#666;font-style:italic>&#34;*&#34;</span>],  <span style=color:#888;font-style:italic># In production, specify your domains!</span>
</span></span><span style=display:flex><span>    allow_credentials=<span style=font-weight:700>True</span>,
</span></span><span style=display:flex><span>    allow_methods=[<span style=color:#666;font-style:italic>&#34;*&#34;</span>],
</span></span><span style=display:flex><span>    allow_headers=[<span style=color:#666;font-style:italic>&#34;*&#34;</span>],
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># 2. Our event generator - the heart of SSE</span>
</span></span><span style=display:flex><span><span style=font-weight:700>async</span> <span style=font-weight:700>def</span> <span style=color:#666;font-weight:700;font-style:italic>livescore_generator</span>():
</span></span><span style=display:flex><span>    <span style=color:#666;font-style:italic>&#34;&#34;&#34;Our enthusiastic commentator&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    data = load_mock_data()
</span></span><span style=display:flex><span>    <span style=font-weight:700>for</span> update <span style=font-weight:700>in</span> data:
</span></span><span style=display:flex><span>        <span style=color:#888;font-style:italic># Format: &#34;data: {json_data}\n\n&#34;</span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>yield</span> <span style=color:#666;font-style:italic>f</span><span style=color:#666;font-style:italic>&#34;data: </span><span style=color:#666;font-style:italic>{</span>json.dumps(update)<span style=color:#666;font-style:italic>}</span><span style=color:#666;font-style:italic>\n\n</span><span style=color:#666;font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>await</span> asyncio.sleep(2)  <span style=color:#888;font-style:italic># Taking a breath between updates</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># 3. The SSE endpoint</span>
</span></span><span style=display:flex><span>@app.get(<span style=color:#666;font-style:italic>&#34;/livescore&#34;</span>)
</span></span><span style=display:flex><span><span style=font-weight:700>async</span> <span style=font-weight:700>def</span> <span style=color:#666;font-weight:700;font-style:italic>livescore</span>():
</span></span><span style=display:flex><span>    <span style=font-weight:700>return</span> StreamingResponse(
</span></span><span style=display:flex><span>        livescore_generator(),
</span></span><span style=display:flex><span>        media_type=<span style=color:#666;font-style:italic>&#34;text/event-stream&#34;</span>,  <span style=color:#888;font-style:italic># Magic happens here!</span>
</span></span><span style=display:flex><span>        headers={
</span></span><span style=display:flex><span>            <span style=color:#666;font-style:italic>&#34;Cache-Control&#34;</span>: <span style=color:#666;font-style:italic>&#34;no-cache&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#666;font-style:italic>&#34;Connection&#34;</span>: <span style=color:#666;font-style:italic>&#34;keep-alive&#34;</span>,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    )
</span></span></code></pre></div><p>Let&rsquo;s break down what&rsquo;s happening:</p><ol><li>The <code>CORSMiddleware</code> allows our frontend to connect from any origin</li><li><code>livescore_generator()</code> is an async generator that:<ul><li>Loads match data (in real life, this would be live data)</li><li>Yields properly formatted SSE messages</li><li>Uses <code>asyncio.sleep()</code> to simulate real-time updates</li></ul></li><li><code>StreamingResponse</code> keeps the connection open and streams data</li></ol><h3 id=the-frontend-the-patient-listener>The Frontend (The Patient Listener)</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#888;font-style:italic>// 1. Create the connection
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span><span style=font-weight:700>const</span> eventSource = <span style=font-weight:700>new</span> EventSource(<span style=color:#666;font-style:italic>&#34;http://localhost:8000/livescore&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic>// 2. Set up our event handlers
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>eventSource.onopen = () =&gt; {
</span></span><span style=display:flex><span>  console.log(<span style=color:#666;font-style:italic>&#34;Connection established!&#34;</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>eventSource.onmessage = (event) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#888;font-style:italic>// Parse the JSON data from the event
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>  <span style=font-weight:700>const</span> data = JSON.parse(event.data);
</span></span><span style=display:flex><span>  <span style=color:#888;font-style:italic>// Update our UI with the new match data
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>  updateMatch(data);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>eventSource.onerror = (error) =&gt; {
</span></span><span style=display:flex><span>  console.error(<span style=color:#666;font-style:italic>&#34;Connection lost! Attempting to reconnect...&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#888;font-style:italic>// The browser will automatically try to reconnect
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic>// 3. Update the UI with the match data
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span><span style=font-weight:700;font-style:italic>function</span> updateMatch(data) {
</span></span><span style=display:flex><span>  <span style=color:#888;font-style:italic>// Update score
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>  <span style=font-weight:700;font-style:italic>document</span>.querySelector(<span style=color:#666;font-style:italic>&#34;.score&#34;</span>).textContent =
</span></span><span style=display:flex><span>    <span style=color:#666;font-style:italic>`</span><span style=color:#666;font-style:italic>${</span>data.score.home<span style=color:#666;font-style:italic>}</span><span style=color:#666;font-style:italic> - </span><span style=color:#666;font-style:italic>${</span>data.score.away<span style=color:#666;font-style:italic>}</span><span style=color:#666;font-style:italic>`</span>;
</span></span><span style=display:flex><span>  <span style=color:#888;font-style:italic>// Update match status
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>  <span style=font-weight:700;font-style:italic>document</span>.querySelector(<span style=color:#666;font-style:italic>&#34;.match-status&#34;</span>).textContent = data.status;
</span></span><span style=display:flex><span>  <span style=color:#888;font-style:italic>// ... more UI updates
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>}
</span></span></code></pre></div><h2 id=why-sse->Why SSE? üåü</h2><ol><li><p><strong>It&rsquo;s HTTP</strong>: No special protocols, no weird handshakes, just good old HTTP. Your server can finally stop pretending it knows WebSocket dance moves.</p></li><li><p><strong>Auto-reconnect</strong>: Like a clingy friend, it&rsquo;ll keep trying to reconnect if the connection drops. No need to implement retry logic!</p></li><li><p><strong>One-way communication</strong>: Perfect for when your client is in &ldquo;introvert mode&rdquo; and just wants to receive updates without the pressure of responding.</p></li><li><p><strong>Built-in event types</strong>: Want to categorize your updates? SSE has built-in event types! It&rsquo;s like having different chat groups for different topics.</p></li></ol><h2 id=try-it-yourself->Try It Yourself! üöÄ</h2><ol><li><p>Clone this repo:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/ntk148v/sse-fastapi.git
</span></span><span style=display:flex><span><span style=font-weight:700;font-style:italic>cd</span> sse-fastapi
</span></span></code></pre></div></li><li><p>Install dependencies (we use <code>uv</code> because we&rsquo;re cool):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>uv venv .venv
</span></span><span style=display:flex><span>. .venv/bin/activate
</span></span><span style=display:flex><span>uv pip install -e .
</span></span></code></pre></div></li><li><p>Run the server:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python main.py
</span></span></code></pre></div></li><li><p>Open http://localhost:8000 in your browser and watch the soccer match unfold!</p></li></ol><p><img src="https://raw.githubusercontent.com/ntk148v/sse-fastapi/refs/heads/master/sse-sample.gif?token=GHSAT0AAAAAADCSDBD3ECSYB2HNRIMMT4ZI2CH2L7A" alt></p><h2 id=when-to-use-sse->When to Use SSE? ü§ì</h2><p>Use SSE when:</p><ul><li>You need real-time updates</li><li>The data flow is mostly server ‚Üí client</li><li>You want to keep things simple</li><li>Your server is feeling particularly chatty</li></ul><p>Don&rsquo;t use SSE when:</p><ul><li>You need two-way communication (use WebSocket)</li><li>Your server has social anxiety</li><li>You&rsquo;re building a multiplayer game (unless it&rsquo;s a very slow chess match)</li></ul><h2 id=real-world-use-cases--best-practices->Real-World Use Cases & Best Practices üéØ</h2><h3 id=perfect-fits-for-sse->Perfect Fits for SSE üéØ</h3><ol><li><p><strong>Live Sports Updates</strong></p><ul><li>Real-time scores (like our example!)</li><li>Play-by-play commentary</li><li>Team statistics</li></ul></li><li><p><strong>Financial Applications</strong></p><ul><li>Stock price updates</li><li>Currency exchange rates</li><li>Trading notifications</li></ul></li><li><p><strong>Social Media Features</strong></p><ul><li>News feeds</li><li>Notification systems</li><li>Like/comment counters</li></ul></li><li><p><strong>System Monitoring</strong></p><ul><li>Server health metrics</li><li>Log streaming</li><li>Resource usage stats</li></ul></li><li><p><strong>Content Management</strong></p><ul><li>Content update notifications</li><li>Publishing status</li><li>Collaborative editing notifications</li></ul></li></ol><h3 id=best-practices->Best Practices üèÜ</h3><ol><li><p><strong>Connection Management</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#888;font-style:italic>// Always handle reconnection gracefully
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span><span style=font-weight:700>const</span> connect = () =&gt; {
</span></span><span style=display:flex><span>  <span style=font-weight:700>const</span> eventSource = <span style=font-weight:700>new</span> EventSource(<span style=color:#666;font-style:italic>&#34;/events&#34;</span>);
</span></span><span style=display:flex><span>  eventSource.onerror = (error) =&gt; {
</span></span><span style=display:flex><span>    eventSource.close();
</span></span><span style=display:flex><span>    setTimeout(connect, 5000); <span style=color:#888;font-style:italic>// Custom reconnect logic
</span></span></span><span style=display:flex><span><span style=color:#888;font-style:italic></span>  };
</span></span><span style=display:flex><span>  <span style=font-weight:700>return</span> eventSource;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div></li><li><p><strong>Event ID Tracking</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#888;font-style:italic># Server-side</span>
</span></span><span style=display:flex><span><span style=font-weight:700>async</span> <span style=font-weight:700>def</span> <span style=color:#666;font-weight:700;font-style:italic>generator</span>():
</span></span><span style=display:flex><span>    <span style=font-weight:700>for</span> event <span style=font-weight:700>in</span> events:
</span></span><span style=display:flex><span>        <span style=font-weight:700>yield</span> <span style=color:#666;font-style:italic>f</span><span style=color:#666;font-style:italic>&#34;id: </span><span style=color:#666;font-style:italic>{</span>event.id<span style=color:#666;font-style:italic>}</span><span style=color:#666;font-style:italic>\n</span><span style=color:#666;font-style:italic>data: </span><span style=color:#666;font-style:italic>{</span>json.dumps(event.data)<span style=color:#666;font-style:italic>}</span><span style=color:#666;font-style:italic>\n\n</span><span style=color:#666;font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#888;font-style:italic># Client-side</span>
</span></span><span style=display:flex><span>eventSource.addEventListener(<span style=color:#666;font-style:italic>&#39;message&#39;</span>, (e) =&gt; {
</span></span><span style=display:flex><span>    localStorage.setItem(<span style=color:#666;font-style:italic>&#39;lastEventId&#39;</span>, e.lastEventId);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div></li><li><p><strong>Resource Management</strong></p><ul><li>Keep payload sizes small (&lt; 10KB recommended)</li><li>Batch updates when possible</li><li>Use compression for large datasets</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#888;font-style:italic># Batch updates example</span>
</span></span><span style=display:flex><span><span style=font-weight:700>async</span> <span style=font-weight:700>def</span> <span style=color:#666;font-weight:700;font-style:italic>batch_generator</span>():
</span></span><span style=display:flex><span>    updates = []
</span></span><span style=display:flex><span>    <span style=font-weight:700>for</span> event <span style=font-weight:700>in</span> events:
</span></span><span style=display:flex><span>        updates.append(event)
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> <span style=font-weight:700;font-style:italic>len</span>(updates) &gt;= 5:
</span></span><span style=display:flex><span>            <span style=font-weight:700>yield</span> <span style=color:#666;font-style:italic>f</span><span style=color:#666;font-style:italic>&#34;data: </span><span style=color:#666;font-style:italic>{</span>json.dumps(updates)<span style=color:#666;font-style:italic>}</span><span style=color:#666;font-style:italic>\n\n</span><span style=color:#666;font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>            updates = []
</span></span></code></pre></div></li><li><p><strong>Error Handling</strong></p><ul><li>Always include error events</li><li>Implement custom retry logic when needed</li><li>Monitor connection health</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#888;font-style:italic># Server-side error handling</span>
</span></span><span style=display:flex><span>@app.get(<span style=color:#666;font-style:italic>&#34;/stream&#34;</span>)
</span></span><span style=display:flex><span><span style=font-weight:700>async</span> <span style=font-weight:700>def</span> <span style=color:#666;font-weight:700;font-style:italic>stream</span>():
</span></span><span style=display:flex><span>    <span style=font-weight:700>try</span>:
</span></span><span style=display:flex><span>        <span style=font-weight:700>return</span> StreamingResponse(generator())
</span></span><span style=display:flex><span>    <span style=font-weight:700>except</span> Exception <span style=font-weight:700>as</span> e:
</span></span><span style=display:flex><span>        <span style=font-weight:700>yield</span> <span style=color:#666;font-style:italic>f</span><span style=color:#666;font-style:italic>&#34;event: error</span><span style=color:#666;font-style:italic>\n</span><span style=color:#666;font-style:italic>data: </span><span style=color:#666;font-style:italic>{</span><span style=font-weight:700;font-style:italic>str</span>(e)<span style=color:#666;font-style:italic>}</span><span style=color:#666;font-style:italic>\n\n</span><span style=color:#666;font-style:italic>&#34;</span>
</span></span></code></pre></div></li><li><p><strong>Security Considerations</strong></p><ul><li>Implement proper authentication</li><li>Use HTTPS in production</li><li>Rate limit connections per client</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#888;font-style:italic># Basic rate limiting example</span>
</span></span><span style=display:flex><span><span style=font-weight:700>from</span> <span style=color:#666;font-weight:700;font-style:italic>fastapi</span> <span style=font-weight:700>import</span> HTTPException
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CLIENTS = {}
</span></span><span style=display:flex><span>MAX_CONNECTIONS = 3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@app.get(<span style=color:#666;font-style:italic>&#34;/stream&#34;</span>)
</span></span><span style=display:flex><span><span style=font-weight:700>async</span> <span style=font-weight:700>def</span> <span style=color:#666;font-weight:700;font-style:italic>stream</span>(request):
</span></span><span style=display:flex><span>    client_ip = request.client.host
</span></span><span style=display:flex><span>    <span style=font-weight:700>if</span> CLIENTS.get(client_ip, 0) &gt;= MAX_CONNECTIONS:
</span></span><span style=display:flex><span>        <span style=font-weight:700>raise</span> HTTPException(429, <span style=color:#666;font-style:italic>&#34;Too many connections&#34;</span>)
</span></span><span style=display:flex><span>    CLIENTS[client_ip] = CLIENTS.get(client_ip, 0) + 1
</span></span></code></pre></div></li><li><p><strong>Production Tips</strong></p><ul><li>Use a load balancer that supports long polling</li><li>Implement heartbeat messages</li><li>Monitor server resources</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#888;font-style:italic># Heartbeat example</span>
</span></span><span style=display:flex><span><span style=font-weight:700>async</span> <span style=font-weight:700>def</span> <span style=color:#666;font-weight:700;font-style:italic>generator_with_heartbeat</span>():
</span></span><span style=display:flex><span>    <span style=font-weight:700>while</span> <span style=font-weight:700>True</span>:
</span></span><span style=display:flex><span>        <span style=font-weight:700>yield</span> <span style=color:#666;font-style:italic>&#34;:</span><span style=color:#666;font-style:italic>\n\n</span><span style=color:#666;font-style:italic>&#34;</span>  <span style=color:#888;font-style:italic># Heartbeat</span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>await</span> asyncio.sleep(30)
</span></span></code></pre></div></li></ol><h2 id=the-end->The End üé¨</h2><p>So there you have it! SSE is like having a friend who&rsquo;s happy to keep you updated without expecting you to respond. It&rsquo;s perfect for live scores, news feeds, status updates, or any situation where you just want to sit back and let the data flow.</p><p>Remember: In a world of chatty WebSockets, sometimes it&rsquo;s okay to be a quiet SSE. ü§´</p><h2 id=contributing->Contributing ü§ù</h2><p>Found a bug? Want to add features? Feel free to create an issue or submit a PR. Just remember to be nice - this is a judgment-free zone for both extroverted WebSockets and introverted SSEs!</p><time datetime=2025-06-10>2025-06-10&nbsp;</time><div class=terminal-nav><div class=back-nav><a href=../ class=back-link>../</a></div></div></main><footer><p>&copy; Copyright 2025 &#183;
<a href=https://github.com/ntk148v/shibui>shibui</a></p></footer></body></html>